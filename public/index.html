<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="http://code.jquery.com/jquery-3.3.1.min.js"></script> 
    <script src="../script.js"> </script>
 
    <link rel='stylesheet' href='./stylesheet/main.css'>
    <link rel='stylesheet' href='./stylesheet/weather.css'>
    <link rel='stylesheet' href='./stylesheet/contact.css'>
    <link rel="stylesheet" href='./stylesheet/skill.css'>

 
</head> 
<body>
    <!-- weather status in Boston -->
    <div class="containWeather">
        <img class="icon">
        <p class="weather"></p>
        <p class="temp"></p>
        <p class="date"></p> 
    </div>

    <!-- Nav Bar -->
    <nav id="navBar">
        <ul class="inlineNav">
            
            <li class="nav"><a href="#">Home</a></li>
            <li class="nav"><a href="#Portfolio">Portfolio</a></li>
            <li class="nav"><a href="#contactMe">Contact</a></li>   
        </ul>  
        <ul class="inlineNav icons">
            
            <li class="iconLink"><a href="https://www.linkedin.com/in/sararat-burke-869497b9/" target="_blank"><img src="../images/in2.png"  id="position" class="images" /></a></li>
            <li class="iconLink"><a href="https://github.com/sararatBurke" target="_blank"><img src="../images/github2.png"  class="images"/></a></li>
            
        </ul>
    </nav>
   
<!--------- Banner Section ---------->
    <div id="banner">
        <div id="bannerContent">
            <h1 id="headTitle">I AM <br/>A Web Designer</h1>
            
            <p id="headText">Experienced Web Developer with a demonstrated history of working in the construction industry. Skilled in Photography, Graphic Design, and Web Design. Strong engineering professional with a Bachelor's degree focused in Design and Applied Arts from Naresuan University. Currently studing in Web Development Program at Bunker Hill Community College in Boston, Massachusetts.</p>  
            <button id="contact">Contact Me</button>
        </div>

    </div>

    <div id="Portfolio" class="page1">
        <p id="skill">Skill: <button type="button" id="callData">Display Skills</button></p>
        <ul id="output"></ul>
    </div>

<!--------- The last page --------->
    <div id="contactMe" class="page2 bottomPage">
        <p id="contactHead">Get in touch</p>
        
        <form id="studentForm">
            <table>
                <tr>
                    <td>Name:</td>
                    <td><input type="text" name="name" value="NAME" class="textBox"></td>
                    <td rowspan="2"><input type="text" name="comment" value="MESSAGE" id="comment" class="textBox"></td>
                </tr>

                <tr>
                    <td>Email:</td>
                    <td><input type="text" name="email" value="EMAIL" class="textBox"></td>
                </tr>

                <tr>
                    <td colspan="3"><input type="submit" id="submit"  name="Send Data"></td>
                </tr>
            </table>
        
            <div id="message" class="msg"></div>
             
        </form>
            
    </div>
   
    <footer id="footer">@2021 JSON-SERVER PROJECT | BY SARARAT BURKE</footer>

<!-- Google sheet button -->
<script>
    $(document).ready(function(){    
        $('#callData').click(function(){
     
            var url = 'https://spreadsheets.google.com/feeds/list/1CpCT5pY70fSEoGZwGI-dcJ-N1QitzTfLbdHCaicNMDg/od6/public/values?alt=json'     
            $.getJSON(url,function(data){
                
                
                    //console.log(data.feed.entry);

                    var html = ''

                    $.each(data.feed.entry,function(key,val){
                        console.log(val.gsx$studentid.$t)
                        console.log(val.gsx$logo.$t)
                        console.log(val.gsx$percent.$t)
                        console.log(val.gsx$skills.$t)
                        

                    html += '<article>'+ 

                    '<h6>'+ val.gsx$percent.$t + '</h6>'+
                    '<img class="skillImg" src="'+ val.gsx$logo.$t +'" width="50" height="50"/><br/>' +
                    '<b>' + val.gsx$skills.$t + ' </b></article>'  
                    
                    })
                    $('#output').html(html); 
                    $('#output').fadeToggle(0); 
            })
            
        });     
    });
</script>

<!---------- Form Script --------->
    <script>
        const message = document.getElementById('message');
        const submit = document.querySelector('#submit');


        document.querySelector('#studentForm').addEventListener('submit', function (e) {
        e.preventDefault();
        message.innerHTML = ''
        let name = document.querySelector('input[name="name"]')
        let email = document.querySelector('input[name="email"]')
        let comment = document.querySelector('input[name="comment"]')
        let data = 'name=' + name.value + '&email=' + email.value + '&comment=' + comment.value;
        const xhr = new XMLHttpRequest();

        if (name.value && email.value && comment.value) {
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4) {
                    message.innerHTML = xhr.response;
                }
            }
            xhr.open('POST', 'http://localhost:3000/posts', true)
            xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded")
            xhr.send(data)
        }
        name.value = null
        email.value = null
        comment.value = null
        })

    </script>

    
</body>   
</html>